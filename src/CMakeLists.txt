foreach(ARITH ${ARCHS})
    add_library(${ARITH}mumps_c OBJECT mumps_c.c)
    target_include_directories(${ARITH}mumps_c PUBLIC ${MUMPS_INCLUDEDIR})
    target_compile_definitions(${ARITH}mumps_c PRIVATE MUMPS_ARITH=MUMPS_ARITH_${ARITH})

    add_library(${ARITH}mumps STATIC ${ARITH}ana_aux.f ${ARITH}mumps_struc_def.f mumps_static_mapping.f lr_common.f ana_orderings_wrappers_m.f ana_blk_m.f ${ARITH}ana_aux_par.f mumps_memory_mod.f ${ARITH}ana_lr.f ${ARITH}lr_core.f ${ARITH}lr_type.f ${ARITH}mumps_lr_data_m.f front_data_mgt_m.f ${ARITH}lr_stats.f ${ARITH}fac_asm_master_ELT_m.f omp_tps_common_m.f fac_ibct_data_m.f fac_asm_build_sort_index_ELT_m.f ${ARITH}fac_mem_dynamic.f ${ARITH}mumps_load.f ${ARITH}mumps_comm_buffer.f mumps_comm_ibcast.f fac_future_niv2_mod.f ${ARITH}static_ptr_m.f ${ARITH}omp_tps_m.f ${ARITH}fac_asm_master_m.f fac_asm_build_sort_index_m.f ${ARITH}fac_front_aux.f ${ARITH}mumps_ooc.f ${ARITH}mumps_ooc_buffer.f mumps_ooc_common.f mumps_l0_omp_m.f mumps_pivnul_mod.f ${ARITH}fac_front_LU_type1.f ${ARITH}fac_lr.f ${ARITH}fac_front_LU_type2.f ${ARITH}fac_front_type2_aux.f ${ARITH}fac_front_LDLT_type1.f ${ARITH}fac_front_LDLT_type2.f ${ARITH}fac_sispointers_m.f ${ARITH}fac_omp_m.f ${ARITH}fac_par_m.f ${ARITH}fac_sol_l0omp_m.f ${ARITH}mumps_config_file.f ${ARITH}mumps_sol_es.f ${ARITH}mumps_save_restore.f ${ARITH}mumps_save_restore_files.f ${ARITH}mumps_mpi3_mod.f ${ARITH}sol_lr.f ${ARITH}sol_omp_m.f ${ARITH}ini_driver.f ${ARITH}ana_driver.f ${ARITH}fac_driver.f ${ARITH}sol_driver.f ${ARITH}sol_distrhs.f ${ARITH}sol_distsol.f ${ARITH}end_driver.f ${ARITH}ana_aux_ELT.f ${ARITH}ana_dist_m.f ${ARITH}ana_LDLT_preprocess.f ${ARITH}ana_reordertree.f ${ARITH}arrowheads.f ${ARITH}bcast_int.f ${ARITH}fac_asm_ELT.f ${ARITH}fac_asm.f ${ARITH}fac_b.f ${ARITH}fac_diag.f ${ARITH}fac_distrib_distentry.f ${ARITH}fac_dist_arrowheads_omp.f ${ARITH}fac_distrib_ELT.f ${ARITH}fac_lastrtnelind.f ${ARITH}fac_mem_alloc_cb.f ${ARITH}fac_mem_compress_cb.f ${ARITH}fac_mem_free_block_cb.f ${ARITH}fac_mem_stack_aux.f ${ARITH}fac_mem_stack.f ${ARITH}fac_process_band.f ${ARITH}fac_process_blfac_slave.f ${ARITH}fac_process_blocfacto_LDLT.f ${ARITH}fac_process_blocfacto.f ${ARITH}fac_process_bf.f ${ARITH}fac_process_end_facto_slave.f ${ARITH}fac_process_contrib_type1.f ${ARITH}fac_process_contrib_type2.f ${ARITH}fac_process_contrib_type3.f ${ARITH}fac_process_maprow.f ${ARITH}fac_process_master2.f ${ARITH}fac_process_message.f ${ARITH}fac_process_root2slave.f ${ARITH}fac_process_root2son.f ${ARITH}fac_process_rtnelind.f ${ARITH}fac_root_parallel.f ${ARITH}fac_scalings.f ${ARITH}fac_determinant.f ${ARITH}fac_scalings_simScaleAbs.f ${ARITH}fac_scalings_simScale_util.f ${ARITH}fac_sol_pool.f ${ARITH}fac_type3_symmetrize.f ${ARITH}ini_defaults.f ${ARITH}mumps_driver.f ${ARITH}mumps_f77.f ${ARITH}mumps_gpu.c ${ARITH}mumps_iXamax.f ${ARITH}ana_mtrans.f ${ARITH}ooc_panel_piv.f ${ARITH}rank_revealing.f ${ARITH}sol_aux.f ${ARITH}sol_bwd_aux.f ${ARITH}sol_bwd.f ${ARITH}sol_c.f ${ARITH}sol_fwd_aux.f ${ARITH}sol_fwd.f ${ARITH}sol_matvec.f ${ARITH}sol_root_parallel.f ${ARITH}tools.f ${ARITH}type3_root.f ana_omp_m.f double_linked_list.f fac_descband_data_m.f fac_maprow_data_m.f mumps_mpitoomp_m.f sol_ds_common_m.f ana_blk.f ana_orderings.f ana_set_ordering.f ana_AMDMF.f bcast_errors.f estim_flops.f mumps_type2_blocking.f mumps_version.f mumps_print_defined.f mumps_addr.c mumps_common.c mumps_pord.c mumps_metis.c mumps_metis64.c mumps_metis_int.c mumps_scotch.c mumps_scotch64.c mumps_scotch_int.c mumps_io.c mumps_io_basic.c mumps_io_thread.c mumps_io_err.c mumps_numa.c mumps_thread.c mumps_save_restore_C.c mumps_config_file_C.c mumps_thread_affinity.c mumps_register_thread.c tools_common.f sol_common.f)
    set_target_properties(${ARITH}mumps PROPERTIES Fortran_MODULE_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}/${ARITH}mumps)
    target_include_directories(${ARITH}mumps PUBLIC $<BUILD_INTERFACE:${MUMPS_INCLUDEDIR}> $<INSTALL_INTERFACE:${HEADER_INSTALL_DIR}>)
    target_compile_definitions(${ARITH}mumps PRIVATE metis pord GEMMT_AVAILABLE)
    target_link_libraries(${ARITH}mumps PUBLIC pord metis::metis mpiseq MKL::MKL $<TARGET_OBJECTS:${ARITH}mumps_c> )


endforeach(ARITH ${ARCHS})